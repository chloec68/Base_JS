<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
    <!-- STYLES SHEET -->
    <link rel="stylesheet" href="styles.css">
    <!-- CDN  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="quote.js"></script>
    <title>Exercice 5</title>
</head>
<body>
    <div id="wrapperExo5">
        <div class="conteneurExo5">
            <div class="favoris"><i class="fa-regular fa-star"></i>ajouter aux favoris</div>
            <div class="citation"></div>
            <div class="auteur"></div>
        </div>
        <div class="conteneurExo5">
            <div class="favoris"><i class="fa-regular fa-star"></i>ajouter aux favoris</div>
            <div class="citation"></div>
            <div class="auteur"></div>
        </div>
        <div class="conteneurExo5">
            <div class="favoris"><i class="fa-regular fa-star"></i>ajouter aux favoris</div>
            <div class="citation"></div>
            <div class="auteur"></div>
        </div>
        <div class="conteneurExo5">
            <div class="favoris"><i class="fa-regular fa-star"></i>ajouter aux favoris</div>
            <div class="citation"></div>
            <div class="auteur"></div>
        </div>
        <div class="conteneurExo5">
            <div class="favoris"><i class="fa-regular fa-star"></i>ajouter aux favoris</div>
            <div class="citation"></div>
            <div class="auteur"></div>
        </div>
    </div>

    <script>
        //TESTS
        // console.log(quotes); // OBJECT
        // console.log(quotes["Serges Karamazov"]); // STRING
        // console.log(Object.keys(quotes)); // ARRAY ["author","author"]
        // console.log(Object.values(quotes)); // ARRAY ["quotes",'quotes'] 
        // console.log(document.querySelector(".citation").nextSibling)
        // console.log(document.querySelector(".citation").parentNode)
        // console.log(document.querySelector(".citation").textContent)
        // console.log(document.querySelector(".auteur").textContent)
        

        //RECUPERATION DES ELEMENTS PERTINENTS
        const auteurs = document.querySelectorAll(".auteur");
        const citations = document.querySelectorAll(".citation");
        const etoiles = document.querySelectorAll(".fa-star");


        //AFFICHAGE DES CITATIONS
        citations.forEach((citation,index) => {
            citation.innerText = Object.values(quotes)[index]
        })
        
        //AFFICHAGE DES AUTEURS 
        auteurs.forEach((auteur,index) => {
            auteur.innerText=Object.keys(quotes)[index]
        })
        
        //SYSTEME DE FAVORIS


        etoiles.forEach(etoile => {

                etoile.addEventListener('click',function(){

                    const conteneur = event.currentTarget.closest('.conteneurExo5') //OBJECT
                    const citation = conteneur.querySelector('.citation').textContent //STRING
                    const auteur = conteneur.querySelector('.auteur').textContent //STRING

                        if(etoile.classList.contains("fa-regular")){
                            etoile.classList.remove("fa-regular");
                            etoile.classList.add("fa-solid");
                            etoile.style.color="rgb(255, 234, 0)";
                            window.localStorage.setItem(auteur,citation)
                         
                        }else{
                            etoile.classList.add("fa-regular");
                            etoile.classList.remove("fa-solid")
                            etoile.style.color="rgb(161, 159, 155)";
                            window.localStorage.removeItem(auteur,citation)
                        }
                })
        })
        
        const showFavoris = window.localStorage.getItem("favoris");
        window.localStorage.clear()
     

   


        //localStorage.setItem(key,value)

        // L'interface Storage de l'API Web Storage donne accès au stockage de session (sessionStorage) ou au stockage local (localStorage)

        // window.localStorage => permet de manipuler le stockage local pour un domaine 
        // localStorage.length => renvoie un entier représentant le nombre d'élément contenu dans l'objet Storage
        // localStorage.key(index) => renvoie le nom de la n-ième clé dans le stockage = permet de récupérer clé correspond à l'index spécifié
        // localStorage.getItem(key) => lorsqu'on lui passe le nom d'une clé, cette méthode renvoie la valeur de la clé correspondante ; si la clé n'existe pas, elle retourne
        //null
        // localStorage.setItem(key,value) = lorsqu'on lui passe le nom d'une clé et une valeur, cette méthode ajoute la clé et valeur dans le stockage. Si la clé existe déjà, elle met 
        // la valeur à jour - la clé et la valeur doivent être des chaînes de caractères
        // storage.removeItem(key)=> lorsqu'on lui passe un nom de clé, cette méthode supprime la clé du stockage
        // storage.clear() => supprime toutes les clés du stockage

        // NB : les clés et valeurs sont toujours des chaînes de caractères

        // NB : localStorage ne peut stocker que des chaînes de caractères -> si on veut stocker des objets ou tableaux, il fait les sérialiser avec JSON.stringify()
        // avant de les stocker et les désérialiser avec JSON.parse() lors de la récupération
        


    </script>
</body>
</html>